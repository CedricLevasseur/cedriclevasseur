<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
 Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="rotateBanner.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b></b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>rotateBanner.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		This program insert a random image using jquery library 
 
 The configuration of the images to be randomly display are in the <em>banner.json</em> file.<br>
 This file can contain either images (jpg, png) or flash.<br>
 <ul>
 <li>Images can have the attributes <em>link</em> and <em>onclick</em>. The <em>src</em> attribute is mandatory.<br>
 	the <em>onclick</em> attribute aims to get statistics on the click on a image</li>

 <li>Flash can have the attribute <em>width</em> (default : 728) and <em>height</em> (defaut : 90). The attribute <em>src</em> is mandatory.<br></li>
 </ul>
 here is a example of the content of the <em>banner.json</em> file<br>
 <pre>
 
 [
 	{"src":"http://www.numerikids.com/alpha/wp-content/uploads/2009/06/mario_bros.jpg",
 	"link":"http://www.google.fr",
 	"onclick":"$.get(\"http:\/\/172.16.31.180\/rotateBanner\/vide.gif\");",
 	"options":"target=\"_blank\" style="\"border:purple dotted 3px;\""
 	},
 	{"src":"http://monophonik.com/wp-content/uploads/2009/06/mario-wii.jpg",
 	"link":"http://www.bing.com",
 	"onclick":"$.get(\"http:\/\/172.16.31.180\/rotateBanner\/vide.gif\");"
 	},
 	{"src":"http://www.nintendolesite.com/images/news/news_Nouveau_Mario_en_approche_titre.jpg",
 	"link":"http://www.yahoo.fr",
 	"onclick":"$.get(\"http:\/\/172.16.31.180\/rotateBanner\/vide.gif\");"
 	},
 	{"src":"http://www.vidalonline.com/vidal-theme/images/pub.swf",
 	"width":"728",
 	"height":"90"
 	}
 
 ] 
 </pre>

 To install in your website, follow these steps :
 <ol>
 	<li> configure the multiple banners in the banner.json file 
 	<li> create a &lt;div id="banner"&gt;&lt;/div&gt; in your html file  where you want the banner inserted.
 	<li> load jquery in your html file
 	<li> load this banner.js in your html file and call rotateBanner() like this : &lt;script "src=rotateBanner.js"&gt; rotateBanner($("#banner"))&lt;/script&gt;
 </ol>



 Sometimes you wish to separate the configuration of the banner and your website
 - If you wish multiples website to access to the banner configuration,
 - If you don't want to reconfigure the banners each times you deploy a webapps
 - ...
 When you're in a such configuration, you will employ a Cross Domain Ajax mechanics by following theses steps :

 <ol>
 	<li> configure the multiple banners in the banner.json file 
 	<li> deploy banner.php and banner.json in a new website, i.e http://www.my-company.com/banner/banner.php. 
 	<li> create a &lt;div id="banner"&gt;&lt;/div&gt; in your html file  where you want the banner inserted.
 	<li> load jquery in your html file
 	<li> load this banner.js in your html file and call rotateBanner() with these parameters : &lt;script "src=rotateBanner.js"&gt; rotateBanner($("#banner"),"http://www.my-compagny.com/banner/banner.php?callback=?");&lt/script&gt (callback is very important !!)
 </ol>
 


 <BR/><BR/><B>Version: </B>1.0<BR/><BR/><B>Author:</B> Cédric Levasseur
 <BR/>
	
</p>

<hr>



<!-- ========== METHOD SUMMARY =========== -->

	<a name="method_summary"><!-- --></a>
	<table border="1" cellpadding="3" cellspacing="0" width="100%">
		<tr bgcolor="#CCCCFF" class="TableHeadingColor">
			<td colspan=2>
				<font size="+2">
					<b>Method Summary</b>
				</font>
			</td>
		</tr>
	
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;void</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#!s!rotateBanner">rotateBanner</a></b>(&lt;object&gt; target, json_url)
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 <li> configure the multiple banners in the banner.json file 
 rotateBanner is the main function of this script.
		      </td>
		   </tr>
		
	
	</table>
    <p>

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">/**
 * <span class="attrib">@fileoverview</span> This program insert a random image using jquery library 
 * 
 * The configuration of the images to be randomly display are in the &lt;em&gt;banner.json&lt;/em&gt; file.&lt;br&gt;
 * This file can contain either images (jpg, png) or flash.&lt;br&gt;
 * &lt;ul&gt;
 * &lt;li&gt;Images can have the attributes &lt;em&gt;link&lt;/em&gt; and &lt;em&gt;onclick&lt;/em&gt;. The &lt;em&gt;src&lt;/em&gt; attribute is mandatory.&lt;br&gt;
 * 	the &lt;em&gt;onclick&lt;/em&gt; attribute aims to get statistics on the click on a image&lt;/li&gt;
 *
 * &lt;li&gt;Flash can have the attribute &lt;em&gt;width&lt;/em&gt; (default : 728) and &lt;em&gt;height&lt;/em&gt; (defaut : 90). The attribute &lt;em&gt;src&lt;/em&gt; is mandatory.&lt;br&gt;&lt;/li&gt;
 * &lt;/ul&gt;
 * here is a example of the content of the &lt;em&gt;banner.json&lt;/em&gt; file&lt;br&gt;
 * &lt;pre&gt;
 * 
 * [
 * 	{"src":"http://www.numerikids.com/alpha/wp-content/uploads/2009/06/mario_bros.jpg",
 * 	"link":"http://www.google.fr",
 * 	"onclick":"$.get(\"http:\/\/172.16.31.180\/rotateBanner\/vide.gif\");",
 * 	"options":"target=\"_blank\" style="\"border:purple dotted 3px;\""
 * 	},
 * 	{"src":"http://monophonik.com/wp-content/uploads/2009/06/mario-wii.jpg",
 * 	"link":"http://www.bing.com",
 * 	"onclick":"$.get(\"http:\/\/172.16.31.180\/rotateBanner\/vide.gif\");"
 * 	},
 * 	{"src":"http://www.nintendolesite.com/images/news/news_Nouveau_Mario_en_approche_titre.jpg",
 * 	"link":"http://www.yahoo.fr",
 * 	"onclick":"$.get(\"http:\/\/172.16.31.180\/rotateBanner\/vide.gif\");"
 * 	},
 * 	{"src":"http://www.vidalonline.com/vidal-theme/images/pub.swf",
 * 	"width":"728",
 * 	"height":"90"
 * 	}
 * 
 * ] 
 * &lt;/pre&gt;
 *
 * To install in your website, follow these steps :
 * &lt;ol&gt;
 * 	&lt;li&gt; configure the multiple banners in the banner.json file 
 * 	&lt;li&gt; create a &amp;lt;div id="banner"&amp;gt;&amp;lt;/div&amp;gt; in your html file  where you want the banner inserted.
 * 	&lt;li&gt; load jquery in your html file
 * 	&lt;li&gt; load this banner.js in your html file and call rotateBanner() like this : &amp;lt;script "src=rotateBanner.js"&amp;gt; rotateBanner($("#banner"))&amp;lt;/script&amp;gt;
 * &lt;/ol&gt;
 *
 *
 *
 * Sometimes you wish to separate the configuration of the banner and your website
 * - If you wish multiples website to access to the banner configuration,
 * - If you don't want to reconfigure the banners each times you deploy a webapps
 * - ...
 * When you're in a such configuration, you will employ a Cross Domain Ajax mechanics by following theses steps :
 *
 * &lt;ol&gt;
 * 	&lt;li&gt; configure the multiple banners in the banner.json file 
 * 	&lt;li&gt; deploy banner.php and banner.json in a new website, i.e http://www.my-company.com/banner/banner.php. 
 * 	&lt;li&gt; create a &amp;lt;div id="banner"&amp;gt;&amp;lt;/div&amp;gt; in your html file  where you want the banner inserted.
 * 	&lt;li&gt; load jquery in your html file
 * 	&lt;li&gt; load this banner.js in your html file and call rotateBanner() with these parameters : &amp;lt;script "src=rotateBanner.js"&amp;gt; rotateBanner($("#banner"),"http://www.my-compagny.com/banner/banner.php?callback=?");&amp;lt/script&amp;gt (callback is very important !!)
 * &lt;/ol&gt;
 * 
 *
 *
 * <span class="attrib">@author</span> Cédric Levasseur
 * <span class="attrib">@version</span> 1.0
 *
 */</span>


<span class="comment">/**
 * The bootstrap which load the script
 * <span class="attrib">@deprecated</span> because it forbids parameters to start the script
 *
 *
 * $(document).ready(function() {
 * //  rotateBanner();
 * rotateBanner($("#banner"),"http://www.otherdomain.com/rotateBanner/banner.php?callback=?");	
 * });
 */</span>


<span class="comment">/**
 * 	&lt;li&gt; configure the multiple banners in the banner.json file 
 * rotateBanner is the main function of this script. It is loaded when
 * the html document finished to load.
 * <span class="attrib">@param</span> {object} target a html element, member of the Document Object Model. If empty, it use &amp;lt;div id="banner"&amp;gt;
 * <span class="attrib">@param</span> {string} an url for the banner.json file, if empty, 'banner.json' in the current folder will be used. Otherwise, take care for a Same host url. See http://en.wikipedia.org/wiki/Same_origin_policy for details.
 *
 */</span>
<span class="reserved">function</span> rotateBanner(target, json_url){
	<span class="comment">//loadJQuery();</span>
	<span class="reserved">if</span>(typeof target === <span class="literal">'undefined'</span> || !target) {
		target=$(<span class="literal">"#banner"</span>);
	}
	<span class="reserved">if</span>(typeof json_url === <span class="literal">'undefined'</span> || !json_url) {
		json_url=<span class="literal">"banner.json"</span>;	
	}
	$.ajax({
    	url : json_url,
    	dataType : <span class="literal">'jsonp'</span>,
    	success : <span class="reserved">function</span>(data){
		elem=randomize(data);
		insertElement(target,elem);
	} 
});


}

<span class="comment">/**
 * To prevent multiple load of jquery
 * NO LONGER USED, be sure to load JQUERY before using this  banner.js
 * <span class="attrib">@private</span>
 * <span class="attrib">@deprecated</span>
 */</span>
<span class="comment">/* window.onload = function () {

	 function loadJQuery(){
	  if (window.jQuery === undefined) {
	    var script = document.createElement('script');
	    script.src = 'http://code.jquery.com/jquery-latest.min.js';
	    document.getElementsByTagName('head')[0].appendChild(script); // load jQuery
	  }
	}

}
*/</span>



<span class="comment">/**
 * randomize a data in this data array
 * <span class="attrib">@private</span>
 * <span class="attrib">@param</span> {array} data the array generated by reading the json file
 */</span>
<span class="reserved">function</span> randomize(data){
	var numLow = 0;
	var numHigh = data.length-1;
	var adjustedHigh = (parseFloat(numHigh) - parseFloat(numLow)) + 1;
	var numRand = Math.floor(Math.random()*adjustedHigh) + parseFloat(numLow);
	<span class="reserved">return</span> data[numRand];
}


<span class="comment">/**
 * insert the Element (image or flash) in the &amp;lt;div id="banner"&amp;gt;
 * <span class="attrib">@private</span>
 * <span class="attrib">@param</span> {object} target a html element, member of the Document Object Model
 * <span class="attrib">@param</span> {object} a item of a data (img or flash)
 *
 */</span>
<span class="reserved">function</span> insertElement(target,elem){
	ext=elem.src.substring(elem.src.length-3, elem.src.length);
	var params=<span class="literal">""</span>
	var source=<span class="literal">""</span>;	
	var options=<span class="literal">""</span>;
	<span class="reserved">if</span>(ext==<span class="literal">'swf'</span>){
		<span class="reserved">if</span>(elem.width){
			params=params+<span class="literal">'width="'</span>+elem.width+<span class="literal">'" '</span>;				
		}<span class="reserved">else</span>{
			params=params+<span class="literal">'width="728" '</span>;				
		}
		<span class="reserved">if</span>(elem.height){
			params=params+<span class="literal">'height="'</span>+elem.height+<span class="literal">'" '</span>
		}<span class="reserved">else</span>{		
			params=params+<span class="literal">'height="90" '</span>
		}
		<span class="reserved">if</span>(elem.options &amp;&amp; elem.options.indexOf(<span class="literal">'='</span>,0)&gt;1 ){
			options=elem.options;
		}
		source=<span class="literal">'&lt;object '</span>+params+<span class="literal">' data="'</span>+elem.src+<span class="literal">'" type="application/x-shockwave-flash" '</span>+options+<span class="literal">'&gt;&lt;param value="'</span>+elem.src+<span class="literal">'" name="movie"&gt;&lt;param value="true" name="loop"&gt;&lt;/object&gt;'</span>
	}<span class="reserved">else</span>{
		<span class="comment">// jpg or png</span>
		var source=<span class="literal">'&lt;img src="'</span>+elem.src+<span class="literal">'" /&gt;'</span>
		var onclck=<span class="literal">""</span>;	
		<span class="reserved">if</span>(elem.onclick){
			onclck=onclck+<span class="literal">'onclick='</span>+elem.onclick.replace(<span class="literal">'/\"/g'</span>,<span class="literal">'\\\"'</span>)+<span class="literal">' '</span>
		}		
		<span class="reserved">if</span>(elem.options &amp;&amp; elem.options.indexOf(<span class="literal">'='</span>,0)&gt;1 ){
			options=elem.options;
		}
		<span class="reserved">if</span>(elem.link){
			source=<span class="literal">'&lt;a href="'</span>+elem.link+<span class="literal">'" '</span>+onclck+<span class="literal">' '</span>+options+<span class="literal">' &gt;'</span>+source+<span class="literal">'&lt;/a&gt;'</span>;
		}

	}
	target.html(source);
}
</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b></b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Wed Nov 24 14:16:14 2010</div>
</body>
</html>
